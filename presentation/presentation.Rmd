---
title: "neolithicRC: Eine Suchmaschine für Radiokohlenstoffdatierungen"
author: "Clemens Schmid, Dirk Seidensticker"
date: "11. Februar 2017"
fontsize: 9pt
output:
  beamer_presentation:
    theme: "metropolis"
fig_caption: yes
---

# OpenData & Science 2.0

## *Current situation*

![Prendergast, Grillo et al 2014 - New Dates for Kansyore and Pastoral Neolithic Ceramics in the Eyasi Basin, Tanzania](../images/Prendergast2014_90-91.png)

## *Current situation*

- Bedeutung von Radiokohlenstoffdatierungen für Modellierung der Ausbreitung archäologischer Phänomene
- Faktoren für den Diskurs:
    - Datenbestand
    - Algorithmus

![Shennan, Downey *et al.* 2013; Russell, Silva *et al.* 2014; Jordan, Gibbs et al. 2016](../images/literature_selection.png)

## *Current situation*

![Chaput, Gajewski 2015: 3 Fig. 1](../images/Chaput2015_3Fig1.png)

## *Best practice*: Archives des datations radiocarbone d'Afrique centrale

* OpenData-Veröffentlichung von publizierten 14C-Datierungen aus Zentralafrika (DOI 10.5281/zenodo.61113)

![GitHub-Archiv](../images/aDRAC_1_2017-01-20_13-20-55.png)

## *Best practice*: Archives des datations radiocarbone d'Afrique centrale

![Datensatz im CSV-Format](../images/aDRAC_2_2017-01-20_13-21-34.png)

## *Best practice*: Archives des datations radiocarbone d'Afrique centrale

![Beschriebung des Datensatzes](../images/aDRAC_4_2017-01-20_13-22-19.png)

## *Best practice*: Archives des datations radiocarbone d'Afrique centrale

![Sammlung nützlicher Skripte: Python-Skript zur Konvertierung der Daten](../images/aDRAC_5_2017-01-20_13-23-36.png)

## Interfaces

![https://xkcd.com/927/ -- Randall Munroe](http://imgs.xkcd.com/comics/standards.png "xkcd: Standards")

## Interfaces

[//]: # (Das sind Eckpunkte, die ich gerne gesagt haben würde, die aber besser in deinen Part passen, Dirk.)

- Eine allumfassendes Verwaltungs- und Präsentationsstrategie für 14C-Daten existiert nicht (mehr).
- Daten werden in höchst unterschiedlichen Strukturen gesammelt und veröffentlicht. 
- Die Zugänglichkeit des Gesamtbestands ist damit enorm erschwert.
- Zwei Möglichkeiten: 
    - Schaffung eines zentralen Systems, das von allen bedient wird (unmöglich)
    - Zusammenziehen veröffentlichten Daten (würde vereinfacht durch einen Datenhaltungsstandard)

Zielsetzung von neolithicRC: **"Agregation, Durchsuchbarkeit und Auswertung bestehender Repositorien"**

# neolithicRC

## Projektkontext

![Timeline der Entwicklung von neolithicRC](../images/smartart2.png)

- **DIY Freizeit- und Übungsprojekt** ohne institutionelle Anbindung
- intensiver Austausch mit den Teams hinter CALPAL und RADON
- strukturelle Anbindung an das eScience-Center der Universität Tübingen
- **Warum machen wir das?**
    - Technische Weiterentwicklung eines Werkzeugs
    - Verstehen von Datenverarbeitungs- und Datenhaltungsproblemen
    - Kommunizieren von zeitgemäßen Lösungsansätzen

## Projektkonzept

### Entwicklungsumgebung 

- **R + RStudio:** Einfache Programmiersprache mit riesigem Funktionsumfang in einer optimierten IDE
- **shiny + htmlwidgets:** WebApp-Framework und R-JavaScript Interfaces zur interaktiven Datenvisualisierung
- **git + github:** Versionskontrollsoftware und Cloud-Plattform zur OpenSource-Softwareentwicklung 

https://github.com/nevrome/neolithicR

### Modulstruktur

Klare Trennung einzelner Datenverarbeitungs- und Visualisierungsschritte (Import, Bereinigung, WebApp) um einen zentralen Hub (Datenbank)

- Vereinfachen von Weiterentwicklung und Bugfixing
- Herabsetzen der Einstiegsschwelle für Mitentwickler und Nachnutzer
- Sprach- und Systemunabhängigkeit

## Modulaufbau

![Modulaufbau von neolithicRC](../images/smartart1.png)

## Quellendatenbanken und Interfaces

- **CALPAL:** Radiocarbon Database of the CalPal software package.
- **RADON:** Central European and Scandinavian database of 14C dates for the Neolithic and Early Bronze Age.
- **EUROEVOL:** Cultural Evolution of Neolithic Europe Dataset.
- **aDRAC:** Archives des datations radiocarbone d’Afrique centrale.
- **CONTEXT:** Collection of radiocarbon dates from sites in the Near East and neighboring regions (20.000 - 5.000 calBC).

### Kerndatenelemente

Schlüssel: Quelldatenbank + Labornummer 

\definecolor{ori}{rgb}{0.9215686,0.5058824,0.1058824} 
\setlength{\tabcolsep}{1pt}

| **Datum**           | **Fundort**            | **Kulturkontext**    | **Probe**             | **Referenz**           |
| -----               | -------                | -------------        | -----                 | --------               |
| C14AGE              | \color{ori}{COUNTRY}   | \color{ori}{CULTURE} | \color{ori}{MATERIAL} | \color{ori}{REFERENCE} |
| C14STD              | \color{ori}{LONGITUDE} | \color{ori}{PERIOD}  | \color{ori}{SPECIES}  | NOTICE                 |
| \color{ori}{CALAGE} | \color{ori}{LATITUDE}  | PHASE                | C13                   |                        |
| \color{ori}{CALSTD} | \color{ori}{SITE}      |                      |                       |                        |
|                     | FEATURE                |                      |                       |                        |
|                     | LOCUS                  |                      |                       |                        |

## Datenbereinigung

![Bisher implementierte Bereinigungschritte](../images/smartart3.png)

## Datenbereinigung -- offene Fragen

### VERA-1830, Herxheim, Bandkeramik, 7110 $\pm$ 113 calBP 

\definecolor{ori}{rgb}{0.9215686,0.5058824,0.1058824} 

+--------------------------+----------------------------+-------------------+----------------------------+
|                          | **RADON**                  | **EUROEVOL**      | **CALPAL**                 |
+==========================+============================+===================+============================+
| **MATERIAL**             | collagen, bone             | human bone        | bone                       |
+--------------------------+----------------------------+-------------------+----------------------------+
| **\color{ori}{CULTURE}** | \color{ori}{Linienband-} \ | *\color{ori}{NA}* | \color{ori}{Linienband-} \ |
|                          | \color{ori}{keramik}       |                   | \color{ori}{keramik}       |
+--------------------------+----------------------------+-------------------+----------------------------+
| **\color{ori}{PERIOD}**  | \color{ori}{n/a}           | \color{ori}{EN}   | \color{ori}{Neolithic}     |
+--------------------------+----------------------------+-------------------+----------------------------+
| **LATITUDE**             | 49.140                     | 49.140            | 49.146                     |
+--------------------------+----------------------------+-------------------+----------------------------+
| **LONGITUDE**            | 8.210                      | 8.210             | 8.214                      |
+--------------------------+----------------------------+-------------------+----------------------------+
| **REFERENCE**            | Whittle et al.\            | *NA*              | Wild 2004                  |
|                          | 2011 p. 328                |                   |                            |
+--------------------------+----------------------------+-------------------+----------------------------+

- kulturhistorische Zuordnung scheitert ohne einen absoluten Thesaurus 
- Datenüberschneidungen mit deutlichen Abweichungen zwischen den Quelldatenbanken
    - Bedarf nach Zusammenführung?
    - Zusammenführung nach welcher Prioritätsabfolge?

## 14C-Kalibration

```{r eval = FALSE, size = "tiny"}
# 2sigma range probability border
threshold <- (1-0.9545)/2

interval95 <- datestable[-outofrange, ] %$% 
  # date calibration with comprehensive output 
  Bchron::BchronCalibrate(
    ages = C14AGE, ageSds = C14STD,
    calCurves = rep("intcal13", nrow(.)), eps = 1e-06
  ) %>% 
  # extract border ages of the 2sigma range   
  plyr::ldply(., function(x) {
      x$densities            %>% cumsum -> a      # cumulated density
      which(a <= threshold)  %>% max    -> my_min # lower border 
      which(a > 1-threshold) %>% min    -> my_max # upper border 
      x$ageGrid[c(my_min, my_max)]
  }) 

# calculate date as mean of lower and upper border
amean <- apply(interval95[, 2:3], 1, function(x){round(mean(x))})
```

## WebApp 

https://forschungsdatenarchiv.escience.uni-tuebingen.de/cSchmid/neolithicRC

http://neolithicrc.de



# Demo

## Danke

|**Clemens Schmid**|**Dirk Seidensticker**|
|------------------------------------|------------------------------------|
|Institut für Ur- und Frühgeschichte,||
|CAU Kiel||
|clemens@nevrome.de||

## Demo -Backup